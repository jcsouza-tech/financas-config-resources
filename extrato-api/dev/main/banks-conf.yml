# Configuração de Bancos Suportados e Parsers
bancos:
  suporte:
    names:
      - "banco-do-brasil"
      - "itau"

# Configuração dos Parsers de Extrato
parser:
  # Configuração de auto-discovery
  auto-discovery:
    base-package: "br.com.financas.extrato_api.parser"
    enabled: true
    scan-depth: 2
  config:
    # Banco do Brasil - aceita CSV
    banco-do-brasil:
      name: "Banco do Brasil"
      file-patterns:
        - ".*bb.*\\.csv$"
        - ".*banco.*brasil.*\\.csv$"
        - ".*bb_.*\\.csv$"
        - ".*extrato.*bb.*\\.csv$"
        - "(?i).*extrato.*conta.*corrente.*\\d{6}.*"
      supported-extensions: [".csv"]
      csv:
        separator: ",(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)"
        date-format: "dd/MM/yyyy"
        date-regex: "^\\d{2}/\\d{2}/\\d{4}$"
        value-regex: "^[+-]?\\d{1,3}([.,]\\d{3})*([.,]\\d{1,2})?$|^[+-]?\\d+([.,]\\d{1,2})?$"
        skip-line: 1
        pais: "BR"
        idioma: "pt"
    
    # Itaú - aceita PDF
    itau:
      name: "Itaú"
      file-patterns:
        - ".*itau.*\\.pdf$"
        - ".*itáu.*\\.pdf$"
        - ".*itau_.*\\.pdf$"
        - ".*extrato.*itau.*\\.pdf$"
      supported-extensions: [".pdf"]
      pdf:
        date-format: "dd/MM/yyyy"
        date-regex: "^\\d{2}/\\d{2}/\\d{4}$"
        value-regex: "^[+-]?\\d{1,3}([.,]\\d{3})*([.,]\\d{1,2})?$|^[+-]?\\d+([.,]\\d{1,2})?$"
        # Regex para extrair os 4 campos: data, descrição, data adicional, valor
        # Aceita qualquer nome de lançamento (maiúsculas, hífens, números, pontos, etc.)
        # Exclui transações que contenham "saldo"
        transaction-regex: "(\\d{2}/\\d{2}/\\d{4})\\s+(.+?)\\s+([+-]?\\d{1,3}(?:\\.\\d{3})*(?:,\\d{2})?)(?:\\s+([+-]?\\d{1,3}(?:\\.\\d{3})*(?:,\\d{2})?))?\\s*$"
        header-regex: ".*agência:.*|.*conta:.*|.*saldo em conta.*|.*Limite da Conta.*|.*extrato conta.*|.*período de visualização.*|.*data lançamentos valor.*|.*extrato.*conta.*corrente.*|.*banco.*itau.*|.*itau.*banco.*"
        pais: "BR"
        idioma: "pt"
        text-extraction:
          sort-by-position: true
          encoding: "UTF-8"
  
  # Configuração geral dos parsers
  general:
    parallel-processing: true
    batch-size: 1000
    validation:
      strict-file-type: true
      max-file-size-mb: 50